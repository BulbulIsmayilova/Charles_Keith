!function n(o,a,i){function u(t,e){if(!a[t]){if(!o[t]){var r="function"==typeof require&&require;if(!e&&r)return r(t,!0);if(c)return c(t,!0);throw(e=new Error("Cannot find module '"+t+"'")).code="MODULE_NOT_FOUND",e}r=a[t]={exports:{}},o[t][0].call(r.exports,function(e){return u(o[t][1][e]||e)},r,r.exports,n,o,a,i)}return a[t].exports}for(var c="function"==typeof require&&require,e=0;e<i.length;e++)u(i[e]);return u}({1:[function(e,t,r){"use strict";var a=(n=e("./module"))&&n.__esModule?n:{default:n},i=e("./src/commands"),n=e("./src/helpers"),u=e("./src/parameters");function o(){a.default.init(function(){var r=a.default.debug,n=a.default.logError,o={};Object.defineProperties(a.default.config,{storageMinutesToLive:{enumerable:!0,get:function(){return o.storageMinutesToLive||43200},set:function(e){var t="config.storageMinutesToLive";"number"!=typeof e||e<1?n("".concat(t," must be a number >= 1")):(r("Set ".concat(t," to ").concat(e)),o.storageMinutesToLive=e)}},affiliateAttributionCap:{enumerable:!0,get:function(){return o.affiliateAttributionCap||Number.MAX_SAFE_INTEGER},set:function(e){var t="config.affiliateAttributionCap";Number.isInteger(e)&&1<=e?(r("Set ".concat(t," to ").concat(e)),o.affiliateAttributionCap=e):n("".concat(t," must be a positive integer"))}},storageTTL:{enumerable:!0,get:function(){return Math.round(60*this.storageMinutesToLive*1e3)}}}),a.default.exec=i.exec,a.default.parameters=u.parameters,u.parameters.save()})}Object.assign?o():(0,n.loadScript)("".concat(a.default.env.serviceURL,"/polyfill-es6.min.js"),o)},{"./module":2,"./src/commands":3,"./src/helpers":4,"./src/parameters":5}],2:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.namespace=r.logError=r.env=r.default=r.debug=r.config=void 0;e=((e=e("../bootstrap"))&&e.__esModule?e:{default:e}).default.module("analytics");r.namespace=e.namespace,r.debug=e.debug,r.logError=e.logError,r.env=e.env,r.config=e.config,r.default=e},{"../bootstrap":6}],3:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.exec=void 0;var i=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==p(e)&&"function"!=typeof e)return{default:e};t=l(t);if(t&&t.has(e))return t.get(e);var r,n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(r in e){var a;"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&((a=o?Object.getOwnPropertyDescriptor(e,r):null)&&(a.get||a.set)?Object.defineProperty(n,r,a):n[r]=e[r])}n.default=e,t&&t.set(e,n);return n}(e("../module")),u=e("./helpers"),c=e("./parameters");function l(e){var t,r;return"function"!=typeof WeakMap?null:(t=new WeakMap,r=new WeakMap,(l=function(e){return e?r:t})(e))}function s(e){return function(e){if(Array.isArray(e))return n(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||d(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function f(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,u=[],c=!0,l=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=a.call(r)).done)&&(u.push(n.value),u.length!==t);c=!0);}catch(e){l=!0,o=e}finally{try{if(!c&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(l)throw o}}return u}}(e,t)||d(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(e,t){var r;if(e)return"string"==typeof e?n(e,t):"Map"===(r="Object"===(r=Object.prototype.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:r)||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?n(e,t):void 0}function n(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function p(e){return(p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}r.exec=function(e){var t=a[e];if(t){for(var r=arguments.length,n=new Array(1<r?r-1:0),o=1;o<r;o++)n[o-1]=arguments[o];return t.apply(void 0,n)}(0,i.logError)("No command exists with the name '".concat(e,"'"))};var a={};a.attribution=function(a){if(a){(0,i.debug)("Sending attribution");var e=window.URLSearchParams;if("object"!==p(a)||Array.isArray(a)){if("string"!=typeof a)return void(0,i.logError)('Attribution parameters must be passed as object {...} or URL parameter string "a=1&b=2..."')}else{var t=Object.keys(a).reduce(function(e,t){var r,n=function(e,t){var r,n,o,a,i="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(i)return n=!(r=!0),{s:function(){i=i.call(e)},n:function(){var e=i.next();return r=e.done,e},e:function(e){n=!0,o=e},f:function(){try{r||null==i.return||i.return()}finally{if(n)throw o}}};if(Array.isArray(e)||(i=d(e))||t&&e&&"number"==typeof e.length)return i&&(e=i),a=0,{s:t=function(){},n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:t};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(Array.isArray(a[t])?a[t]:[a[t]]);try{for(n.s();!(r=n.n()).done;){var o=r.value;e.push([t,o])}}catch(e){n.e(e)}finally{n.f()}return e},[]);a=e?String(new e(t)):t.map(function(e){var e=f(e,2),t=e[0],e=e[1];return"".concat(encodeURIComponent(t),"=").concat(encodeURIComponent(e))}).sort().join("&")}var o=c.parameters.retrieve();if(o.size)for(var r in o)!function(t){var e,r=o[t].value,n=c.parameters.find(function(e){return e.name===t});n&&(e=n.sendAs||e,a+="&".concat(e,"=").concat(encodeURIComponent(r))),(n=o[t]).usage||(n.usage=0),o[t].usage++,o.changesPending=!0}(r);e&&(a=new e(s(new e(a).entries()).sort((0,u.objectEntriesSorter)(["slug","order","promo","total","currency"]))).toString());var n,t="".concat(i.env.apiURL,"/attribution?").concat(a),e=function(){i.default.eventLog.push({command:"attribution",status:(0<arguments.length&&void 0!==arguments[0]?arguments[0]:{}).status,parameters:a}),o.changesPending&&o.save(),(0,i.debug)("Attributed ".concat(a))};window.fetch?fetch(t,{headers:{Accept:"application/vnd.duel+json"}}).then(e).catch(i.logError):((n=new XMLHttpRequest).open("GET",t),n.send(null),e())}else(0,i.logError)("Attribution requires parameters")}},{"../module":2,"./helpers":4,"./parameters":5}],4:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.supports=r.objectEntriesSorter=r.loadScript=r.cookie=void 0;var a=e("../module");function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e,t){return s(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,u=[],c=!0,l=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=a.call(r)).done)&&(u.push(n.value),u.length!==t);c=!0);}catch(e){l=!0,o=e}finally{try{if(!c&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(l)throw o}}return u}}(e,t)||c(e,t)||o()}function n(e){return s(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||c(e)||o()}function o(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function c(e,t){var r;if(e)return"string"==typeof e?l(e,t):"Map"===(r="Object"===(r=Object.prototype.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:r)||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?l(e,t):void 0}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function s(e){if(Array.isArray(e))return e}function f(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function d(n){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{};e%2?f(Object(o),!0).forEach(function(e){var t,r;t=n,r=o[e=e],(e=function(e){e=function(e,t){if("object"!==i(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!==i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"===i(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(o)):f(Object(o)).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(o,e))})}return n}r.supports={_results:{},get localStorage(){var e,t,r,n="localStorage";if("boolean"==typeof this._results[n])return this._results[n];try{return null!=(e=window.localStorage)&&e.getItem?(t="".concat(a.namespace,"-storageTest"),window.localStorage.setItem(t,"{}"),r=window.localStorage.getItem(t),window.localStorage.removeItem(t),this._results[n]="{}"===r):this._results[n]=!1}catch(e){(0,a.logError)(e)}return this._results[n]=!1}},r.cookie={save:function(e){var t,r="https:"===location.protocol,n=d({path:"/",expires:new Date(Date.now()+a.config.storageTTL).toUTCString(),secure:r},r&&{sameSite:"None"}),o=(e=encodeURIComponent(String(e)).replaceAll(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),"");for(t in n)n[t]&&(o+="; "+t,!0!==n[t])&&(o+="="+n[t].split(";")[0]);return document.cookie=a.namespace+"="+e+o},retrieve:function(){var e=null==(e=((null==(e=document.cookie)?void 0:e.split(/\s*;\s*/))||[]).map(function(e){e=n(e.split("="));return[e[0],e.slice(1).join("=")]}).find(function(e){return u(e,1)[0]===a.namespace}))?void 0:e[1];return(e=e&&e.replaceAll(/(%[0-9A-Z]{2})+/g,decodeURIComponent))||null}},r.loadScript=function(e,t){var r=document.createElement("script"),t=(r.onload=t,r.src=e,document.getElementsByTagName("script")[0]);t.parentNode.insertBefore(r,t)},r.objectEntriesSorter=function(){var i=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[];return function(e,t){var e=u(e,1)[0],t=u(t,1)[0],r=i.indexOf(e),n=-1===r,o=i.indexOf(t),a=-1===o;return n||a?n&&!a?1:!n&&a?-1:e===t?0:t<e?1:-1:r===o?0:o<r?1:-1}}},{"../module":2}],5:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.parameters=void 0;var u=e("../module"),o=e("./helpers");function c(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,u=[],c=!0,l=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=a.call(r)).done)&&(u.push(n.value),u.length!==t);c=!0);}catch(e){l=!0,o=e}finally{try{if(!c&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(l)throw o}}return u}}(e,t)||l(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(e,t){var r;if(e)return"string"==typeof e?n(e,t):"Map"===(r="Object"===(r=Object.prototype.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:r)||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?n(e,t):void 0}function n(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var s=r.parameters=[{name:"duel_a",sendAs:"affiliate"},{name:"duel_c",sendAs:"ugc"}],a=(s.save=function(){var e=a();if(e){(0,u.debug)("Incoming parameter(s): ".concat(Object.keys(e).join(", ")));var t,r=s.retrieve();for(t in e)r[t]={value:e[t],time:Date.now()};r.save()}else(0,u.debug)("No incoming parameters")},s.retrieve=function(){o.supports.localStorage&&(e=localStorage.getItem(u.namespace),t="localStorage"),e||(e=s.cookie.retrieve(),t="cookie"),e||(e=s.saved,t="memory");var e,t,r="No saved parameters",n=(e||(0,u.debug)(r),{});if(e)try{n=JSON.parse(e),Object.keys(n).length?(0,u.debug)("Saved parameters retrieved from ".concat(t)):(0,u.debug)(r)}catch(e){(0,u.logError)(e)}return Object.defineProperties(n,{save:{value:function(){return s.saved=JSON.stringify(this),o.supports.localStorage&&localStorage.setItem(u.namespace,s.saved),s.cookie.save(s.saved),(this.changesPending=!1,u.debug)("Save parameters"),this}},prune:{value:function(){for(var e=Date.now()-u.config.storageTTL,t=0,r=Object.keys(this);t<r.length;t++){var n=r[t],o=this[n],a=o.time,o=o.usage,i=void 0;a<e?i="expired":"duel_a"===n&&(void 0===o?0:o)>=u.config.affiliateAttributionCap&&(i="capped"),i&&((0,u.debug)("Prune ".concat(i," parameter '").concat(n,"'")),delete this[n],this.changesPending=!0)}return this}},changesPending:{value:!1,writable:!0},size:{get:function(){return Object.keys(this).length}}}),n.prune()},function(){var t=s.map(function(e){return e.name}),e={};if(window.URLSearchParams){var r,n=new URL(location.href),o=function(e,t){var r,n,o,a,i="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(i)return n=!(r=!0),{s:function(){i=i.call(e)},n:function(){var e=i.next();return r=e.done,e},e:function(e){n=!0,o=e},f:function(){try{r||null==i.return||i.return()}finally{if(n)throw o}}};if(Array.isArray(e)||(i=l(e))||t&&e&&"number"==typeof e.length)return i&&(e=i),a=0,{s:t=function(){},n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:t};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(t);try{for(o.s();!(r=o.n()).done;){var a,i=r.value;n.searchParams.has(i)&&((a=n.searchParams.get(i))&&(e[i]=a),n.searchParams.delete(i))}}catch(e){o.e(e)}finally{o.f()}history.replaceState&&Object.keys(e).length&&history.replaceState(null,document.title,String(n))}else location.search.slice(1).replaceAll("&amp;","&").split("&").map(function(e){return e.split("=").map(function(e){return decodeURIComponent(e)})}).filter(function(e){e=c(e,1)[0];return t.includes(e)}).reduce(function(e,t){var t=c(t,2),r=t[0],t=t[1];return e[r]=t,e},e);return Object.keys(e).length?e:null});s.cookie=o.cookie},{"../module":2,"./helpers":4}],6:[function(e,t,r){"use strict";function d(e){return function(e){if(Array.isArray(e))return n(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||m(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function p(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,u=[],c=!0,l=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=a.call(r)).done)&&(u.push(n.value),u.length!==t);c=!0);}catch(e){l=!0,o=e}finally{try{if(!c&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(l)throw o}}return u}}(e,t)||m(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function m(e,t){var r;if(e)return"string"==typeof e?n(e,t):"Map"===(r="Object"===(r=Object.prototype.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:r)||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?n(e,t):void 0}function n(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o,a,y=window.duel||{};y.modules||(o=["apiURL","serviceURL","debug","q"].reduce(function(e,t){return y[t]&&(e[t]=y[t]),e},{}),y=window.duel=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var n=p(t[0].split(":"),2),o=n[0],n=n[1];y.modules[o]?(o=y.modules[o]).exec.apply(o,[n].concat(d(t.slice(1)))):y.q.push(t)},Object.assign(y,{q:[]},o,{env:{},modules:{}}),a=function(e){var t;return!!e&&((t=document.createElement("a")).href=e,e=t.hostname,/\.duel\.(me|tech)$|^localhost$|^192(\.\d{1,3}){3}$|^duel-local-([a-z]+)\.([a-z]+)$/.test(e))},Object.defineProperties(y.env,{serviceURL:{get:function(){return a(y.serviceURL)?y.serviceURL:"https://vision.duel.me"}},apiURL:{get:function(){return a(y.apiURL)?y.apiURL:"https://api.duel.me"}}}),y.module=function(e){var t,o,f;return y.modules[e]?(y.modules[e].debug("Module is already defined"),y.modules[e]):(t="duel-".concat(e),o="".concat(t,":"),f=y.modules[e]={name:e,namespace:t,logError:function(){for(var e,t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return(e=console).error.apply(e,[o].concat(r))},debug:function(){for(var e,t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return y.debug&&(e=console).debug.apply(e,[o].concat(r))},env:y.env,config:{},eventLog:[],init:function(e){if(!f.initialized){f.initialized=!0,null!=e&&e(f);var t,r=function(e,t){var r,n,o,a,i="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(i)return n=!(r=!0),{s:function(){i=i.call(e)},n:function(){var e=i.next();return r=e.done,e},e:function(e){n=!0,o=e},f:function(){try{r||null==i.return||i.return()}finally{if(n)throw o}}};if(Array.isArray(e)||(i=m(e))||t&&e&&"number"==typeof e.length)return i&&(e=i),a=0,{s:t=function(){},n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:t};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(y.q);try{for(r.s();!(t=r.n()).done;){var n,o,a,i,u=t.value,c=p(u[0].split(":"),2),l=c[0],s=c[1];l===f.name&&(n=d(u).slice(1),"config"===s?(a=(o=p(n,2))[0],i=o[1],f.config[a]=i):f.exec.apply(f,[s].concat(d(n))))}}catch(e){r.e(e)}finally{r.f()}}}})}),r.default=y},{}]},{},[1]);